# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
%YAML 1.2
---

$id: "http://devicetree.org/schemas/phy/qcom,hdmi-phy.yaml#"
$schema: "http://devicetree.org/meta-schemas/core.yaml#"

title: Qualcomm Adreno/Snapdragon HDMI phy

maintainers:
  - Rob Clark <robdclark@gmail.com>

allOf:
  - if:
      properties:
        compatible:
          contains:
            const: qcom,hdmi-phy-8996
    then:
      properties:
        reg:
          minItems: 6
          maxItems: 6

        reg-names:
          items:
            - const: hdmi_pll
            - const: hdmi_tx_l0
            - const: hdmi_tx_l1
            - const: hdmi_tx_l2
            - const: hdmi_tx_l3
            - const: hdmi_phy

    else:
      properties:
        reg:
          minItems: 2
          maxItems: 2

        reg-names:
          items:
            - const: hdmi_phy
            - const: hdmi_pll
  - if:
      properties:
        compatible:
          contains:
            const: qcom,hdmi-phy-8960
    then:
      properties:
        clock-names:
          const: slave_iface

  - if:
      properties:
        compatible:
          contains:
            const: qcom,hdmi-phy-8996
    then:
      properties:
        clock-names:
          items:
            - const: iface
            - const: ref

properties:
  compatible:
    contains:
      enum:
        - qcom,hdmi-phy-8084
        - qcom,hdmi-phy-8660
        - qcom,hdmi-phy-8960
        - qcom,hdmi-phy-8974
        - qcom,hdmi-phy-8994
        - qcom,hdmi-phy-8996

  reg: true

  reg-names: true

  clocks: true

  clock-names: true

  power-domains:
    maxItems: 1

  core-vdda-supply: true

  vcca-supply: true

  vddio-supply: true

  '#phy-cells':
    const: 0

required:
  - compatible
  - clocks
  - reg
  - reg-names
  - '#phy-cells'

additionalProperties: false

examples:
  - |
    hdmi_phy: phy@4a00400 {
      compatible = "qcom,hdmi-phy-8960";
      reg-names = "hdmi_phy",
                  "hdmi_pll";
      reg = <0x4a00400 0x60>,
            <0x4a00500 0x100>;
      #phy-cells = <0>;
      power-domains = <&mmcc 1>;
      clock-names = "slave_iface";
      clocks = <&clk 21>;
      core-vdda-supply = <&pm8921_hdmi_mvs>;
    };
